import java.io.*;
import java.net.*;
import java.util.*;
import java.lang.Math;

public class Servidor {
    public static void main(String[] args) throws IOException {

        ServerSocket servidor = new ServerSocket(5000);
        System.out.println("Esperando conexión...........");

        Socket socket = servidor.accept();
        System.out.println("CONECTADO");

        DataInputStream in = new DataInputStream(socket.getInputStream());
        DataOutputStream out = new DataOutputStream(socket.getOutputStream());

        boolean activo = true;

        while (activo) {

            String menu = "\nMENU: \n1SUMA:\n2SENO:\n3COSENO:\n4RAIZ CUADRADA:\n5POTENCIA:\n6SALIR:";
            out.writeUTF(menu);
            System.out.println(" MENU LLEGO A CLIENTE...");

            System.out.println("CLIENTE TOMANDO OPCIÓN...");
            int opcion = in.readInt();
            System.out.println("DECIDIO: " + opcion);

            switch (opcion) {

                case 1: // Suma
                    System.out.println("OPCIÓN: SUMA ");
                    int cantidad = in.readInt();
                    ArrayList<Double> numeros = new ArrayList<>();
                    double suma = 0;

                    System.out.println(" CORRIENDO...");
                    for (int i = 0; i < cantidad; i++) {
                        double num = in.readDouble();
                        numeros.add(num);
                        suma += num;
                    }

                    String resultadoSuma = "RESULTADO SM: " + suma;
                    out.writeUTF(resultadoSuma);
                    System.out.println("ENVIANDO...");
                    break;

                case 2: // Seno
                    System.out.println("SELECCIÓN SENO");
                    System.out.println("VALIDANDO...");
                    double anguloSeno = in.readDouble();
                    String resultadoSeno = "EL SENO ES " + anguloSeno + " es: " + Math.sin(anguloSeno);
                    out.writeUTF(resultadoSeno);
                    System.out.println("ENVIANDO...");
                    break;

                case 3: // Coseno
                    System.out.println(" OPCIÓN: CCOSENO");
                    System.out.println(" VALIDANDO...");
                    double anguloCos = in.readDouble();
                    String resultadoCos = "COSENO ES " + anguloCos + " es: " + Math.cos(anguloCos);
                    out.writeUTF(resultadoCos);
                    System.out.println("ENVIANO...");
                    break;

                case 4: // Raíz cuadrada
                    System.out.println(" OPCIÓN: RAIZ CUADRADA");
                    System.out.println(" VALIDANDO...");
                    double numRaiz = in.readDouble();
                    if (numRaiz >= 0) {
                        out.writeUTF("LA RAIZ ES " + numRaiz + " es: " + Math.sqrt(numRaiz));
                    } else {
                        out.writeUTF("NUMERO POSITIVO.");
                    }
                    System.out.println(" ENVIANDO...");
                    break;

                case 5: // Potencia
                    System.out.println("OPCION: POTENCIA");
                    System.out.println(" VALIDANDO...");
                    double base = in.readDouble();
                    double exponente = in.readDouble();
                    String resultadoPot = base + " ELEVADO " + exponente + " es: " + Math.pow(base, exponente);
                    out.writeUTF(resultadoPot);
                    System.out.println(" ENVIANDO...");
                    break;

                case 6: // Salir
                    System.out.println(" SE SALIO.");
                    out.writeUTF("SIN CONEXIÓN.");
                    activo = false;
                    break;
